### MIO Scripted Effects ###
RUS_upgrade_dalzavod_idea_check = {
	if = {
		limit = {
			check_variable = { RUS_dalzavod_upgrade_MIO = 1 }
			NOT = { has_country_flag = RUS_BZ_first_trait_unlocked }
			mio:RUS_bz_organisation = {
				has_mio_number_of_completed_traits < 2
			}
		}
		set_country_flag = RUS_BZ_first_trait_unlocked
		RUS_upgrade_dalzavod_idea = yes
	}
	else_if = {
		limit = {
			check_variable = { RUS_dalzavod_upgrade_MIO = 2 }
			NOT = { has_country_flag = RUS_AV_first_trait_unlocked }
			mio:RUS_av_organisation = {
				has_mio_number_of_completed_traits < 2
			}
		}
		set_country_flag = RUS_AV_first_trait_unlocked
		RUS_upgrade_dalzavod_idea = yes
	}
	else_if = {
		limit = {
			check_variable = { RUS_dalzavod_upgrade_MIO = 3 }
			NOT = { has_country_flag = RUS_AS_first_trait_unlocked }
			mio:RUS_as_organisation = {
				has_mio_number_of_completed_traits < 2
			}
		}
		set_country_flag = RUS_AS_first_trait_unlocked
		RUS_upgrade_dalzavod_idea = yes
	}
	else_if = {
		limit = {
			check_variable = { RUS_dalzavod_upgrade_MIO = 4 }
			NOT = { has_country_flag = RUS_Dalzavod_first_trait_unlocked }
			mio:RUS_dalzavod_organisation = {
				has_mio_number_of_completed_traits < 2
			}
		}
		set_country_flag = RUS_Dalzavod_first_trait_unlocked
		RUS_upgrade_dalzavod_idea = yes
	}
}
RUS_upgrade_dalzavod_idea = {
	if = {
		limit = {
			NOT = {
				has_idea = dalzavod_mio_upgrade_4
			}
		}
		custom_effect_tooltip = dalzavod_mio_upgrade_tt1
		show_ideas_tooltip = dalzavod_mio_upgrade_4
		custom_effect_tooltip = tooltip_white_line
		custom_effect_tooltip = dalzavod_mio_upgrade_tt2
		if = {
			limit = { has_idea = dalzavod_mio_upgrade_1 }
			swap_ideas = {
				remove_idea = dalzavod_mio_upgrade_1
				add_idea = dalzavod_mio_upgrade_2
			}
		}
		else_if = {
			limit = { has_idea = dalzavod_mio_upgrade_2 }
			swap_ideas = {
				remove_idea = dalzavod_mio_upgrade_2
				add_idea = dalzavod_mio_upgrade_3
			}
		}
		else_if = {
			limit = { has_idea = dalzavod_mio_upgrade_3 }
			swap_ideas = {
				remove_idea = dalzavod_mio_upgrade_3
				add_idea = dalzavod_mio_upgrade_4
			}
			clr_country_flag = RUS_BZ_first_trait_unlocked
			clr_country_flag = RUS_AV_first_trait_unlocked
			clr_country_flag = RUS_AS_first_trait_unlocked
			clr_country_flag = RUS_Dalzavod_first_trait_unlocked
		}
		else = {
			add_ideas = dalzavod_mio_upgrade_1
			custom_effect_tooltip = tooltip_white_line
		}
		custom_effect_tooltip = dalzavod_mio_upgrade_tt3
	}
}

RUS_upgrade_uztm = {
	if = { #Unlocking the trait based on number of allies
		limit = { FROM = { has_country_flag = uztm_prio_eff_cap } }
		if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 0 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_cap_0 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 1 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_cap_1 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 2 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_cap_2 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 3 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_cap_3 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 4 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_cap_4 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 5 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_cap_5 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 6 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_cap_6 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 7 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_cap_7 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 8 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_cap_8 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 9 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_cap_9 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no > 9 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_cap_10 } }
		}
	}
	else_if = {
		limit = { FROM = { has_country_flag = uztm_prio_eff_gro } }
		if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 0 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_gro_0 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 1 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_gro_1 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 2 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_gro_2 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 3 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_gro_3 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 4 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_gro_4 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 5 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_gro_5 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 6 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_gro_6 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 7 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_gro_7 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 8 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_gro_8 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no = 9 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_gro_9 } }
		}
		else_if = {
			limit = { check_variable = { uztm_allies_and_puppets_no > 9 } }
			FROM = { mio:RUS_uztm_organisation = { complete_mio_trait = uztm_upgrade_eff_gro_10 } }
		}
	}
}

RUS_Update_MIO_Research_Speeds = {
	#ChTZ
	mio:RUS_chtz_organisation = {
		set_variable = { Previous_Week_Funds = Current_Week_Funds }
		set_variable = { Current_Week_Funds = funds }
		set_variable = { Funds_Difference = Current_Week_Funds }
		subtract_from_variable = { Funds_Difference = Previous_Week_Funds }
		set_variable = { Funds_Difference_loc = Funds_Difference }
		divide_variable = { Funds_Difference_loc = 7 }
	}
	if = { #Weekly trigger for giving incremental research bonus to MIO ChTZ
		limit = {
			check_variable = { MIO_CHTZ_assigned_manufacturer_number > 0 } #So that the MIO can only gain research speed from manufacturing weapons
			mio:RUS_chtz_organisation = { check_variable = { Funds_Difference > weekly_funds_requirement } }
		}
		if = {
			limit = { mio:RUS_chtz_organisation = { check_variable = { research_bonus < max_research_speed } } }
			mio:RUS_chtz_organisation = { add_mio_research_bonus = weekly_research_speed_gain }
			mio:RUS_chtz_organisation = { add_to_variable = { total_campaign_research_speed = weekly_research_speed_gain_loc } }
		}
		else_if = {
			limit = {
				OR = {
					mio:RUS_chtz_organisation = {
						check_variable = { research_bonus > max_research_speed }
					}
					mio:RUS_chtz_organisation = {
						check_variable = { research_bonus = max_research_speed }
					}
				}
			}
			if = {
				limit = { NOT = { has_country_flag = RUS_CHTZ_RS_Notification } }
				set_country_flag = RUS_CHTZ_RS_Notification
				mio:RUS_chtz_organisation = {
					set_temp_variable = {
						var = RUS_MIO_research_speed_temp
						value = research_bonus
					}
					multiply_temp_variable = {
						var = RUS_MIO_research_speed_temp
						value = 100
					}
					ROOT = {
						set_variable = { RUS_MIO_alert_name = PREV }
						set_variable = { RUS_MIO_research_speed = RUS_MIO_research_speed_temp }
					}
				}
				add_to_array = { RUS_MIO_alerts = THIS }
				scoped_sound_effect = diplomatic_notification
				set_variable_to_random = global.kaiserreich_alerts_dirty
			}
		}
	}
	#VPOZ
	mio:RUS_vpoz_organisation = {
		set_variable = { Previous_Week_Funds = Current_Week_Funds }
		set_variable = { Current_Week_Funds = funds }
		set_variable = { Funds_Difference = Current_Week_Funds }
		subtract_from_variable = { Funds_Difference = Previous_Week_Funds }
		set_variable = { Funds_Difference_loc = Funds_Difference }
		divide_variable = { Funds_Difference_loc = 7 }
	}
	if = { #Weekly trigger for giving incremental research bonus to MIO VPOZ
		limit = {
			check_variable = { MIO_VPOZ_assigned_manufacturer_number > 0 } #So that the MIO can only gain research speed from manufacturing weapons
			mio:RUS_vpoz_organisation = { check_variable = { Funds_Difference > weekly_funds_requirement } }
		}
		if = {
			limit = { mio:RUS_vpoz_organisation = { check_variable = { research_bonus < max_research_speed } } }
			mio:RUS_vpoz_organisation = { add_mio_research_bonus = weekly_research_speed_gain }
			mio:RUS_vpoz_organisation = { add_to_variable = { total_campaign_research_speed = weekly_research_speed_gain_loc } }
		}
		else_if = {
			limit = {
				OR = {
					mio:RUS_vpoz_organisation = {
						check_variable = { research_bonus > max_research_speed }
					}
					mio:RUS_vpoz_organisation = {
						check_variable = { research_bonus = max_research_speed }
					}
				}
			}
			if = {
				limit = { NOT = { has_country_flag = RUS_VPOZ_RS_Notification } }
				set_country_flag = RUS_VPOZ_RS_Notification
				mio:RUS_vpoz_organisation = {
					set_temp_variable = {
						var = RUS_MIO_research_speed_temp
						value = research_bonus
					}
					multiply_temp_variable = {
						var = RUS_MIO_research_speed_temp
						value = 100
					}
					ROOT = {
						set_variable = { RUS_MIO_alert_name = PREV }
						set_variable = { RUS_MIO_research_speed = RUS_MIO_research_speed_temp }
					}
				}
				add_to_array = { RUS_MIO_alerts = THIS }
				scoped_sound_effect = diplomatic_notification
				set_variable_to_random = global.kaiserreich_alerts_dirty
			}
		}
	}
	#BMZ
	mio:RUS_bmz_organisation = {
		set_variable = { Previous_Week_Funds = Current_Week_Funds }
		set_variable = { Current_Week_Funds = funds }
		set_variable = { Funds_Difference = Current_Week_Funds }
		subtract_from_variable = { Funds_Difference = Previous_Week_Funds }
		set_variable = { Funds_Difference_loc = Funds_Difference }
		divide_variable = { Funds_Difference_loc = 7 }
	}
	if = { #Weekly trigger for giving incremental research bonus to MIO BMZ
		limit = {
			check_variable = { MIO_BMZ_assigned_manufacturer_number > 0 } #So that the MIO can only gain research speed from manufacturing weapons
			mio:RUS_bmz_organisation = { check_variable = { Funds_Difference > weekly_funds_requirement } }
		}
		if = {
			limit = { mio:RUS_bmz_organisation = { check_variable = { research_bonus < max_research_speed } } }
			mio:RUS_bmz_organisation = { add_mio_research_bonus = weekly_research_speed_gain }
			mio:RUS_bmz_organisation = { add_to_variable = { total_campaign_research_speed = weekly_research_speed_gain_loc } }
		}
		else_if = {
			limit = {
				OR = {
					mio:RUS_bmz_organisation = {
						check_variable = { research_bonus > max_research_speed }
					}
					mio:RUS_bmz_organisation = {
						check_variable = { research_bonus = max_research_speed }
					}
				}
			}
			if = {
				limit = { NOT = { has_country_flag = RUS_BMZ_RS_Notification } }
				set_country_flag = RUS_BMZ_RS_Notification
				mio:RUS_bmz_organisation = {
					set_temp_variable = {
						var = RUS_MIO_research_speed_temp
						value = research_bonus
					}
					multiply_temp_variable = {
						var = RUS_MIO_research_speed_temp
						value = 100
					}
					ROOT = {
						set_variable = { RUS_MIO_alert_name = PREV }
						set_variable = { RUS_MIO_research_speed = RUS_MIO_research_speed_temp }
					}
				}
				add_to_array = { RUS_MIO_alerts = THIS }
				scoped_sound_effect = diplomatic_notification
				set_variable_to_random = global.kaiserreich_alerts_dirty
			}
		}
	}
	#TsAGI
	mio:RUS_tsagi_organisation = {
		set_variable = { Previous_Week_Funds = Current_Week_Funds }
		set_variable = { Current_Week_Funds = funds }
		set_variable = { Funds_Difference = Current_Week_Funds }
		subtract_from_variable = { Funds_Difference = Previous_Week_Funds }
		set_variable = { Funds_Difference_loc = Funds_Difference }
		divide_variable = { Funds_Difference_loc = 7 }
	}
	if = { #Weekly trigger for giving incremental research bonus to MIO TSAGI
		limit = {
			check_variable = { MIO_TSAGI_assigned_manufacturer_number > 0 } #So that the MIO can only gain research speed from manufacturing weapons
			mio:RUS_tsagi_organisation = { check_variable = { Funds_Difference > weekly_funds_requirement } }
		}
		if = {
			limit = { mio:RUS_tsagi_organisation = { check_variable = { research_bonus < max_research_speed } } }
			mio:RUS_tsagi_organisation = { add_mio_research_bonus = weekly_research_speed_gain }
			mio:RUS_tsagi_organisation = { add_to_variable = { total_campaign_research_speed = weekly_research_speed_gain_loc } }
		}
		else_if = {
			limit = {
				OR = {
					mio:RUS_tsagi_organisation = {
						check_variable = { research_bonus > max_research_speed }
					}
					mio:RUS_tsagi_organisation = {
						check_variable = { research_bonus = max_research_speed }
					}
				}
			}
			if = {
				limit = { NOT = { has_country_flag = RUS_TSAGI_RS_Notification } }
				set_country_flag = RUS_TSAGI_RS_Notification
				mio:RUS_tsagi_organisation = {
					set_temp_variable = {
						var = RUS_MIO_research_speed_temp
						value = research_bonus
					}
					multiply_temp_variable = {
						var = RUS_MIO_research_speed_temp
						value = 100
					}
					ROOT = {
						set_variable = { RUS_MIO_alert_name = PREV }
						set_variable = { RUS_MIO_research_speed = RUS_MIO_research_speed_temp }
					}
				}
				add_to_array = { RUS_MIO_alerts = THIS }
				scoped_sound_effect = diplomatic_notification
				set_variable_to_random = global.kaiserreich_alerts_dirty
			}
		}
	}
	#Azovskaya Sudoverf
	mio:RUS_as_organisation = {
		set_variable = { Previous_Week_Funds = Current_Week_Funds }
		set_variable = { Current_Week_Funds = funds }
		set_variable = { Funds_Difference = Current_Week_Funds }
		subtract_from_variable = { Funds_Difference = Previous_Week_Funds }
		set_variable = { Funds_Difference_loc = Funds_Difference }
		divide_variable = { Funds_Difference_loc = 7 }
	}
	if = { #Weekly trigger for giving incremental research bonus to MIO AS
		limit = {
			check_variable = { MIO_AS_assigned_manufacturer_number > 0 } #So that the MIO can only gain research speed from manufacturing weapons
			mio:RUS_as_organisation = { check_variable = { Funds_Difference > weekly_funds_requirement } }
		}
		if = {
			limit = { mio:RUS_as_organisation = { check_variable = { research_bonus < max_research_speed } } }
			mio:RUS_as_organisation = { add_mio_research_bonus = weekly_research_speed_gain }
			mio:RUS_as_organisation = { add_to_variable = { total_campaign_research_speed = weekly_research_speed_gain_loc } }
		}
		else_if = {
			limit = {
				OR = {
					mio:RUS_as_organisation = {
						check_variable = { research_bonus > max_research_speed }
					}
					mio:RUS_as_organisation = {
						check_variable = { research_bonus = max_research_speed }
					}
				}
			}
			if = {
				limit = { NOT = { has_country_flag = RUS_AS_RS_Notification } }
				set_country_flag = RUS_AS_RS_Notification
				mio:RUS_as_organisation = {
					set_temp_variable = {
						var = RUS_MIO_research_speed_temp
						value = research_bonus
					}
					multiply_temp_variable = {
						var = RUS_MIO_research_speed_temp
						value = 100
					}
					ROOT = {
						set_variable = { RUS_MIO_alert_name = PREV }
						set_variable = { RUS_MIO_research_speed = RUS_MIO_research_speed_temp }
					}
				}
				add_to_array = { RUS_MIO_alerts = THIS }
				scoped_sound_effect = diplomatic_notification
				set_variable_to_random = global.kaiserreich_alerts_dirty
			}
		}
	}
}

RUS_Update_MIO_XP_Gains = {
	#Obukhov
	mio:RUS_obukhov_organisation = {
		set_variable = { Previous_Week_Funds = Current_Week_Funds }
		set_variable = { Current_Week_Funds = funds }
		set_variable = { Funds_Difference = Current_Week_Funds }
		subtract_from_variable = { Funds_Difference = Previous_Week_Funds }
		set_variable = { Funds_Difference_loc = Funds_Difference }
		divide_variable = { Funds_Difference_loc = 7 }
	}
	if = { #Remove if below threshold
		limit = {
			mio:RUS_obukhov_organisation = { check_variable = { Funds_Difference < weekly_funds_requirement } }
			OR = {
				has_idea = RUS_obukhov_army_xp
				has_idea = RUS_obukhov_army_xp_2
			}
			RUS_has_obukhov_upgrade_5_or_6 = yes
			check_variable = { Obukhov_Research_Number < 1 }
		}
		remove_ideas = {
			RUS_obukhov_army_xp
			RUS_obukhov_army_xp_2
		}
	}
	else_if = { #Add if above threshold
		limit = {
			OR = {
				check_variable = { Obukhov_Research_Number < 1 }
				mio:RUS_obukhov_organisation = { check_variable = { Funds_Difference > weekly_funds_requirement } }
			}
			NOT = {
				has_idea = RUS_obukhov_army_xp
				has_idea = RUS_obukhov_army_xp_2
			}
			RUS_has_obukhov_upgrade_5_or_6 = yes
		}
		if = {
			limit = {
				mio:RUS_obukhov_organisation = {
					is_mio_trait_completed = obukhov_upgrade_7
				}
			}
			add_ideas = RUS_obukhov_army_xp_2
		}
		else = {
			add_ideas = RUS_obukhov_army_xp
		}
	}
	if = {
		limit = {
			OR = {
				has_idea = RUS_obukhov_army_xp
				has_idea = RUS_obukhov_army_xp_2
			}
		}
		mio:RUS_obukhov_organisation = {
			set_temp_variable = { total_xp_to_be_added = xp_gain_loc }
			multiply_temp_variable = { total_xp_to_be_added = 7 }
			add_to_variable = { total_campaign_xp = total_xp_to_be_added }
		}
	}
	#Gamayun
	mio:RUS_gamayun_organisation = {
		set_variable = { Previous_Week_Funds = Current_Week_Funds }
		set_variable = { Current_Week_Funds = funds }
		set_variable = { Funds_Difference = Current_Week_Funds }
		subtract_from_variable = { Funds_Difference = Previous_Week_Funds }
		set_variable = { Funds_Difference_loc = Funds_Difference }
		divide_variable = { Funds_Difference_loc = 7 }
	}
	if = { #Remove if below threshold
		limit = {
			mio:RUS_gamayun_organisation = { check_variable = { Funds_Difference < weekly_funds_requirement } }
			OR = {
				has_idea = RUS_gamayun_air_xp
				has_idea = RUS_gamayun_air_xp_2
			}
			check_variable = { Gamayun_Research_Number < 1 }
		}
		remove_ideas = {
			RUS_gamayun_air_xp
			RUS_gamayun_air_xp_2
		}
	}
	else_if = { #Add if above threshold
		limit = {
			OR = {
				mio:RUS_gamayun_organisation = { check_variable = { Funds_Difference > weekly_funds_requirement } }
				check_variable = { Gamayun_Research_Number > 0 }
			}
			NOT = {
				has_idea = RUS_gamayun_air_xp
				has_idea = RUS_gamayun_air_xp_2
			}
		}
		if = {
			limit = {
				mio:RUS_gamayun_organisation = {
					is_mio_trait_completed = gamayun_upgrade_1
				}
			}
			add_ideas = RUS_gamayun_air_xp_2
		}
		else = {
			add_ideas = RUS_gamayun_air_xp
		}
	}
	if = {
		limit = {
			OR = {
				has_idea = RUS_gamayun_air_xp
				has_idea = RUS_gamayun_air_xp_2
			}
		}
		mio:RUS_gamayun_organisation = {
			set_temp_variable = { total_xp_to_be_added = xp_gain_loc }
			multiply_temp_variable = { total_xp_to_be_added = 7 }
			add_to_variable = { total_campaign_xp = total_xp_to_be_added }
		}
	}
	#Baltiysky Zavod
	mio:RUS_bz_organisation = {
		set_variable = { Previous_Week_Funds = Current_Week_Funds }
		set_variable = { Current_Week_Funds = funds }
		set_variable = { Funds_Difference = Current_Week_Funds }
		subtract_from_variable = { Funds_Difference = Previous_Week_Funds }
		set_variable = { Funds_Difference_loc = Funds_Difference }
		divide_variable = { Funds_Difference_loc = 7 }
	}
	if = { #Remove if below threshold
		limit = {
			mio:RUS_bz_organisation = { check_variable = { Funds_Difference < weekly_funds_requirement } }
			OR = {
				has_idea = RUS_bz_navy_xp
				has_idea = RUS_bz_navy_xp_2
			}
			check_variable = { BZ_Research_Number < 1 }
		}
		remove_ideas = {
			RUS_bz_navy_xp
			RUS_bz_navy_xp_2
		}
	}
	else_if = { #Add if above threshold
		limit = {
			OR = {
				mio:RUS_bz_organisation = { check_variable = { Funds_Difference > weekly_funds_requirement } }
				check_variable = { BZ_Research_Number > 0 }
			}
			NOT = {
				has_idea = RUS_bz_navy_xp
				has_idea = RUS_bz_navy_xp_2
			}
		}
		if = {
			limit = {
				mio:RUS_bz_organisation = {
					is_mio_trait_completed = bz_upgrade_5
				}
			}
			add_ideas = RUS_bz_navy_xp_2
		}
		else = {
			add_ideas = RUS_bz_navy_xp
		}
	}
	if = {
		limit = {
			OR = {
				has_idea = RUS_bz_navy_xp
				has_idea = RUS_bz_navy_xp_2
			}
		}
		mio:RUS_bz_organisation = {
			set_temp_variable = { total_xp_to_be_added = xp_gain_loc }
			multiply_temp_variable = { total_xp_to_be_added = 7 }
			add_to_variable = { total_campaign_xp = total_xp_to_be_added }
		}
	}
}

RUS_Update_Sokol = {
	#Construction Sokol
	if = {
		limit = { NOT = { has_variable = RUS_sokol_limit } }
		set_variable = {
			var = RUS_sokol_limit
			value = 0.05
		}
	}
	if = {
		limit = {
			mio:RUS_sokol_construction_organisation = {
				is_mio_visible = yes
			}
			check_variable = { Sokol_Research_Number > 0 }
		}
		set_variable = { design_team_assign_cost_dif = 0 }
		if = {
			limit = { #Decrease design team assign cost if researching construction/excavation tech
				check_variable = { Sokol_Research_Number > 0 }
				OR = {
					is_researching_technology = construction1
					is_researching_technology = construction2
					is_researching_technology = construction3
					is_researching_technology = construction4
					is_researching_technology = construction5
					is_researching_technology = excavation1
					is_researching_technology = excavation2
					is_researching_technology = excavation3
					is_researching_technology = excavation4
					is_researching_technology = excavation5
				}
			}
			add_to_variable = {
				var = design_team_assign_cost_dif
				value = -0.01
			}
		}
		if = {
			limit = { #Increase design team assign cost if researching air tech
				check_variable = { Sokol_Research_Number > 0 }
				OR = {
					is_researching_technology = iw_small_airframe
					is_researching_technology = basic_small_airframe
					is_researching_technology = improved_small_airframe
					is_researching_technology = advanced_small_airframe
					is_researching_technology = modern_small_airframe
					is_researching_technology = iw_medium_airframe
					is_researching_technology = basic_medium_airframe
					is_researching_technology = improved_medium_airframe
					is_researching_technology = advanced_medium_airframe
					is_researching_technology = modern_medium_airframe
					is_researching_technology = iw_large_airframe
					is_researching_technology = basic_large_airframe
					is_researching_technology = improved_large_airframe
					is_researching_technology = advanced_large_airframe
					is_researching_technology = modern_large_airframe
					is_researching_technology = heavy_bombs
					is_researching_technology = armor_piercing_bombs
					is_researching_technology = photo_reconnaisance
					is_researching_technology = air_torpedoe_1
					is_researching_technology = air_torpedoe_2
					is_researching_technology = air_torpedoe_3
					is_researching_technology = aa_lmg
					is_researching_technology = survivability_studies
					is_researching_technology = aa_hmg
					is_researching_technology = aa_cannon_1
					is_researching_technology = aa_cannon_2
					is_researching_technology = aa_cannon_3
					is_researching_technology = engines_1
					is_researching_technology = engines_2
					is_researching_technology = engines_3
					is_researching_technology = engines_4
					is_researching_technology = range_improvements
					is_researching_technology = aircraft_construction
					is_researching_technology = suicide_charge
					is_researching_technology = sp_centrifugal_jet_tech
					is_researching_technology = reinforced_wings_mothership
					is_researching_technology = miniature_fighters
					is_researching_technology = aerial_hangars
				}
			}
			add_to_variable = {
				var = design_team_assign_cost_dif
				value = 0.01
			}
		}
		if = {
			limit = {
				check_variable = { design_team_assign_cost_dif = 0.01 }
			}
			if = {
				limit = {
					check_variable = { RUS_sokol_limit < 0.20 }
				}
				add_to_variable = {
					var = RUS_sokol_limit
					value = design_team_assign_cost_dif
				}
				set_temp_variable = { RUS_sokol_limit_temp = RUS_sokol_limit }
				mio:RUS_sokol_construction_organisation = {
					set_mio_design_team_assign_cost = RUS_sokol_limit_temp
					add_mio_funds_gain_factor = 0.05
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { design_team_assign_cost_dif = -0.01 }
			}
			if = {
				limit = {
					check_variable = { RUS_sokol_limit > 0.00 }
				}
				add_to_variable = {
					var = RUS_sokol_limit
					value = design_team_assign_cost_dif
				}
				set_temp_variable = { RUS_sokol_limit_temp = RUS_sokol_limit }
				mio:RUS_sokol_construction_organisation = {
					set_mio_design_team_assign_cost = RUS_sokol_limit_temp
					add_mio_funds_gain_factor = -0.05
				}
			}
		}
	}
	#Production Sokol
	if = {
		limit = {
			mio:RUS_sokol_production_organisation = {
				is_mio_visible = yes
			}
			check_variable = { Sokol_Research_Number > 0 }
		}
		set_variable = { design_team_assign_cost_dif = 0 }
		if = {
			limit = { #Decrease design team assign cost if researching production tech
				check_variable = { Sokol_Research_Number > 0 }
				OR = {
					is_researching_technology = basic_machine_tools
					is_researching_technology = improved_machine_tools
					is_researching_technology = advanced_machine_tools
					is_researching_technology = assembly_line_production
					is_researching_technology = flexible_line
					is_researching_technology = streamlined_line
					is_researching_technology = improved_equipment_conversion
					is_researching_technology = advanced_equipment_conversion
					is_researching_technology = concentrated_industry
					is_researching_technology = concentrated_industry2
					is_researching_technology = concentrated_industry3
					is_researching_technology = concentrated_industry4
					is_researching_technology = concentrated_industry5
					is_researching_technology = dispersed_industry
					is_researching_technology = dispersed_industry2
					is_researching_technology = dispersed_industry3
					is_researching_technology = dispersed_industry4
					is_researching_technology = dispersed_industry5
				}
			}
			add_to_variable = {
				var = design_team_assign_cost_dif
				value = -0.01
			}
		}
		if = {
			limit = { #Increase design team assign cost if researching air tech
				check_variable = { Sokol_Research_Number > 0 }
				OR = {
					is_researching_technology = iw_small_airframe
					is_researching_technology = basic_small_airframe
					is_researching_technology = improved_small_airframe
					is_researching_technology = advanced_small_airframe
					is_researching_technology = modern_small_airframe
					is_researching_technology = iw_medium_airframe
					is_researching_technology = basic_medium_airframe
					is_researching_technology = improved_medium_airframe
					is_researching_technology = advanced_medium_airframe
					is_researching_technology = modern_medium_airframe
					is_researching_technology = iw_large_airframe
					is_researching_technology = basic_large_airframe
					is_researching_technology = improved_large_airframe
					is_researching_technology = advanced_large_airframe
					is_researching_technology = modern_large_airframe
					is_researching_technology = heavy_bombs
					is_researching_technology = armor_piercing_bombs
					is_researching_technology = photo_reconnaisance
					is_researching_technology = air_torpedoe_1
					is_researching_technology = air_torpedoe_2
					is_researching_technology = air_torpedoe_3
					is_researching_technology = aa_lmg
					is_researching_technology = survivability_studies
					is_researching_technology = aa_hmg
					is_researching_technology = aa_cannon_1
					is_researching_technology = aa_cannon_2
					is_researching_technology = aa_cannon_3
					is_researching_technology = engines_1
					is_researching_technology = engines_2
					is_researching_technology = engines_3
					is_researching_technology = engines_4
					is_researching_technology = range_improvements
					is_researching_technology = aircraft_construction
					is_researching_technology = suicide_charge
					is_researching_technology = sp_centrifugal_jet_tech
					is_researching_technology = reinforced_wings_mothership
					is_researching_technology = miniature_fighters
					is_researching_technology = aerial_hangars
				}
			}
			add_to_variable = {
				var = design_team_assign_cost_dif
				value = 0.01
			}
		}
		if = {
			limit = {
				check_variable = { design_team_assign_cost_dif = 0.01 }
			}
			if = {
				limit = {
					check_variable = { RUS_sokol_limit < 0.20 }
				}
				add_to_variable = {
					var = RUS_sokol_limit
					value = design_team_assign_cost_dif
				}
				set_temp_variable = { RUS_sokol_limit_temp = RUS_sokol_limit }
				mio:RUS_sokol_production_organisation = {
					set_mio_design_team_assign_cost = RUS_sokol_limit_temp
					add_mio_funds_gain_factor = 0.05
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { design_team_assign_cost_dif = -0.01 }
			}
			if = {
				limit = {
					check_variable = { RUS_sokol_limit > 0.00 }
				}
				add_to_variable = {
					var = RUS_sokol_limit
					value = design_team_assign_cost_dif
				}
				set_temp_variable = { RUS_sokol_limit_temp = RUS_sokol_limit }
				mio:RUS_sokol_production_organisation = {
					set_mio_design_team_assign_cost = RUS_sokol_limit_temp
					add_mio_funds_gain_factor = -0.05
				}
			}
		}
	}
}

RUS_obukhov_eff_cap_tt = {
	if = {
		limit = {
			FROM = {
				NOT = {
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_2_lvl4
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_2_lvl3
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_2_lvl2
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_3_lvl4
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_3_lvl3
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_3_lvl2
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_4_lvl4
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_4_lvl3
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_4_lvl2
					}
				}
			}
		}
		custom_effect_tooltip = RUS_obukhov_eff_cap_tt
	}
}

RUS_obukhov_eff_gro_tt = {
	if = {
		limit = {
			FROM = {
				NOT = {
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_1_lvl4
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_1_lvl3
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_1_lvl2
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_3_lvl4
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_3_lvl3
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_3_lvl2
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_4_lvl4
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_4_lvl3
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_4_lvl2
					}
				}
			}
		}
		custom_effect_tooltip = RUS_obukhov_eff_gro_tt
	}
}

RUS_obukhov_resource_need_tt = {
	if = {
		limit = {
			FROM = {
				NOT = {
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_1_lvl4
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_1_lvl3
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_1_lvl2
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_2_lvl4
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_2_lvl3
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_2_lvl2
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_4_lvl4
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_4_lvl3
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_4_lvl2
					}
				}
			}
		}
		custom_effect_tooltip = RUS_obukhov_resource_need_tt
	}
}

RUS_obukhov_conversion_tt = {
	if = {
		limit = {
			FROM = {
				NOT = {
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_1_lvl4
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_1_lvl3
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_1_lvl2
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_2_lvl4
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_2_lvl3
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_2_lvl2
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_3_lvl4
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_3_lvl3
					}
					mio:RUS_obukhov_organisation = {
						is_mio_trait_completed = obukhov_upgrade_3_3_lvl2
					}
				}
			}
		}
		custom_effect_tooltip = RUS_obukhov_conversion_tt
	}
}

RUS_complete_sokol_upgrade_1 = {
	FROM = {
		mio:RUS_sokol_organisation = {
			set_temp_variable = { RUS_temp_sokol_funds = funds }
		}
		mio:RUS_sokol_construction_organisation = {
			complete_mio_trait = sokol_upgrade_1
			add_mio_funds_gain_factor = 0.25
			add_mio_funds = RUS_temp_sokol_funds
		}
	}
}

RUS_complete_sokol_upgrade_2 = {
	FROM = {
		mio:RUS_sokol_organisation = {
			set_temp_variable = { RUS_temp_sokol_funds = funds }
		}
		mio:RUS_sokol_production_organisation = {
			complete_mio_trait = sokol_upgrade_2
			add_mio_funds_gain_factor = 0.25
			add_mio_funds = RUS_temp_sokol_funds
		}
	}
}

RUS_AV_set_random_decaying_funds_bonus = {
	log = "[GetDateText]: [Root.GetName]: Executed scripted effect RUS_AV_set_random_decaying_funds_bonus"
	custom_effect_tooltip = RUS_AV_Number_Of_Funds_Bonus_Granted_tt
	RUS_execute_AV = yes
	FROM = { mio:RUS_av_organisation = { add_to_variable = { total_campaign_funds_bonus = 1 } } }
	if = {
		limit = { #Execute another time if the trait has been completed
			FROM = {
				mio:RUS_av_organisation = {
					is_mio_trait_completed = av_upgrade_3_4
				}
			}
		}
		RUS_execute_AV = yes
		FROM = { mio:RUS_av_organisation = { add_to_variable = { total_campaign_funds_bonus = 1 } } }
	}
	if = {
		limit = { #Execute another time if the policy is active
			FROM = {
				mio:RUS_av_organisation = {
					has_mio_policy_active = RUS_mio_policy_offer_fiscal_opportunities
				}
			}
		}
		RUS_execute_AV = yes
		FROM = { mio:RUS_av_organisation = { add_to_variable = { total_campaign_funds_bonus = 1 } } }
	}
}

RUS_execute_AV = {
	log = "[GetDateText]: [Root.GetName]: Executed scripted effect RUS_execute_AV"
	hidden_effect = {
		FROM = {
			mio:RUS_av_organisation = { set_temp_variable = { Temp_Funds_Bonus = Funds_Bonus } }
			set_variable = { visible_Funds_Bonus = Temp_Funds_Bonus }
			random_military_industrial_organization = {
				limit = {
					NOT = { has_mio_flag = RUS_AV_decaying_funds_bonus }
					is_mio_assigned_to_task = yes
				}
				if = {
					limit = {
						FROM = { check_variable = { visible_Funds_Bonus = 1.00 } }
					}
					set_variable = { RUS_AV_Recent_Funds_Bonus_Added = 100 }
					add_mio_funds_gain_factor = 1.00
					set_mio_flag = {
						flag = RUS_AV_decaying_funds_bonus
						value = 100
					}
				}
				else_if = {
					limit = {
						FROM = { check_variable = { visible_Funds_Bonus = 1.50 } }
					}
					set_variable = { RUS_AV_Recent_Funds_Bonus_Added = 150 }
					add_mio_funds_gain_factor = 1.50
					set_mio_flag = {
						flag = RUS_AV_decaying_funds_bonus
						value = 150
					}
				}
				else_if = {
					limit = {
						FROM = { check_variable = { visible_Funds_Bonus = 2.00 } }
					}
					set_variable = { RUS_AV_Recent_Funds_Bonus_Added = 200 }
					add_mio_funds_gain_factor = 2.00
					set_mio_flag = {
						flag = RUS_AV_decaying_funds_bonus
						value = 200
					}
				}
			}
			mio:RUS_putilovets_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_putilovets_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_okmo_kr_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_okmo_kr_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_uztm_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_uztm_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_tstz_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_tstz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_chtz_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_chtz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_bz_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_bz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_av_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_av_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_as_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_as_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_dalzavod_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_dalzavod_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_osoavia_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_osoavia_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_duks_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_duks_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_tsagi_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_tsagi_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_gamayun_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_gamayun_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_skorost_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_skorost_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_sokol_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_sokol_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_sokol_construction_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_sokol_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_sokol_production_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_sokol_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_toz_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_toz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_vpoz_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_vpoz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_imz_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_imz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_obukhov_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_obukhov_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_bmz_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_bmz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_amo_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_amo_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_amo_organisation_non_nsb = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_amo_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_naz_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_naz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_naz_organisation_lar = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_naz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
			mio:RUS_laz_organisation = {
				if = {
					limit = { has_variable = RUS_AV_Recent_Funds_Bonus_Added }
					PREV = { mio:RUS_av_organisation = { set_variable = { av_laz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Bonus_Added } } }
					clear_variable = RUS_AV_Recent_Funds_Bonus_Added
				}
			}
		}
	}
}

RUS_Update_Decaying_Funds_Bonus = {
	log = "[GetDateText]: [Root.GetName]: Executed scripted effect RUS_Update_Decaying_Funds_Bonus"
	mio:RUS_av_organisation = { set_temp_variable = { Temp_Weekly_funds_decay = Weekly_funds_decay } }
	set_variable = { visible_Weekly_funds_decay = Temp_Weekly_funds_decay }
	every_military_industrial_organization = {
		limit = { #Only update those that are currently being used by player and that have the bonus
			has_mio_flag = RUS_AV_decaying_funds_bonus
			is_mio_assigned_to_task = yes
		}
		if = {
			limit = { #Reduce by 3 if there are no upgrades
				FROM = { check_variable = { visible_Weekly_funds_decay = 0.03 } }
			}
			modify_mio_flag = {
				flag = RUS_AV_decaying_funds_bonus
				value = -3
			}
			if = { #If below threshold, then remove the flag and funds bonus
				limit = {
					has_mio_flag = {
						flag = RUS_AV_decaying_funds_bonus
						value = 0
					}
				}
				clr_mio_flag = RUS_AV_decaying_funds_bonus
				add_mio_funds_gain_factor = -0.03
			}
			else_if = {
				limit = {
					has_mio_flag = {
						flag = RUS_AV_decaying_funds_bonus
						value = -1
					}
				}
				clr_mio_flag = RUS_AV_decaying_funds_bonus
				add_mio_funds_gain_factor = -0.02
			}
			else_if = {
				limit = {
					has_mio_flag = {
						flag = RUS_AV_decaying_funds_bonus
						value = -2
					}
				}
				clr_mio_flag = RUS_AV_decaying_funds_bonus
				add_mio_funds_gain_factor = -0.01
			}
			else = { #Otherwise lower the funds bonus by 3%
				add_mio_funds_gain_factor = -0.03
				set_variable = { RUS_AV_Recent_Funds_Reduced = 3 }
			}
		}
		else_if = { #Reduce by 2 if there is 1 upgrade
			limit = {
				FROM = { check_variable = { visible_Weekly_funds_decay = 0.02 } }
			}
			modify_mio_flag = {
				flag = RUS_AV_decaying_funds_bonus
				value = -2
			}
			if = { #If below threshold, then remove the flag and funds bonus
				limit = {
					has_mio_flag = {
						flag = RUS_AV_decaying_funds_bonus
						value = 0
					}
				}
				clr_mio_flag = RUS_AV_decaying_funds_bonus
				add_mio_funds_gain_factor = -0.02
			}
			else_if = {
				limit = {
					has_mio_flag = {
						flag = RUS_AV_decaying_funds_bonus
						value = -1
					}
				}
				clr_mio_flag = RUS_AV_decaying_funds_bonus
				add_mio_funds_gain_factor = -0.01
			}
			else = { #Otherwise lower the funds bonus by 2%
				add_mio_funds_gain_factor = -0.02
				set_variable = { RUS_AV_Recent_Funds_Reduced = 2 }
			}
		}
		else_if = { #Reduce by 1 if there are 2 upgrades
			limit = {
				FROM = { check_variable = { visible_Weekly_funds_decay = 0.01 } }
			}
			modify_mio_flag = {
				flag = RUS_AV_decaying_funds_bonus
				value = -1
			}
			if = { #If below threshold, then remove the flag and funds bonus
				limit = {
					has_mio_flag = {
						flag = RUS_AV_decaying_funds_bonus
						value = 0
					}
				}
				clr_mio_flag = RUS_AV_decaying_funds_bonus
				add_mio_funds_gain_factor = -0.01
			}
			else = { #Otherwise lower the funds bonus by 1%
				add_mio_funds_gain_factor = -0.01
				set_variable = { RUS_AV_Recent_Funds_Reduced = 1 }
			}
		}
	}
	mio:RUS_putilovets_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_putilovets_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_okmo_kr_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_okmo_kr_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_uztm_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_uztm_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_tstz_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_tstz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_chtz_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_chtz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_bz_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_bz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_av_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_av_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_as_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_as_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_dalzavod_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_dalzavod_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_osoavia_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_osoavia_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_duks_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_duks_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_tsagi_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_tsagi_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_gamayun_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_gamayun_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_skorost_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_skorost_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_sokol_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_sokol_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_sokol_construction_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_sokol_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_sokol_production_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_sokol_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_toz_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_toz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_vpoz_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_vpoz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_imz_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_imz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_obukhov_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_obukhov_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_bmz_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_bmz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_amo_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_amo_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_amo_organisation_non_nsb = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_amo_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_naz_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_naz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_naz_organisation_lar = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_naz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
	mio:RUS_laz_organisation = {
		if = {
			limit = { has_variable = RUS_AV_Recent_Funds_Reduced }
			ROOT = { mio:RUS_av_organisation = { subtract_from_variable = { av_laz_research_speed = PREV.PREV.RUS_AV_Recent_Funds_Reduced } } }
			clear_variable = RUS_AV_Recent_Funds_Reduced
		}
	}
}

RUS_unlock_TOZ_medal_decision = {
	FROM = {
		set_variable = {
			var = TOZ_Divisions
			value = 4
		}
		hidden_effect = {
			activate_targeted_decision = { target = FROM decision = RUS_TOZ_Medals }
			set_variable = { TOZ_Required_Funds = 500 }
		}
	}
}

RUS_TOZ_Hand_Out_Medals = {
	if = {
		limit = { NOT = { has_variable = RUS_TOZ_total_medals } }
		set_variable = { RUS_TOZ_total_medals = 0 }
	}
	if = {
		limit = { FROM = { has_variable = TOZ_Divisions } }
		custom_effect_tooltip = toz_give_medals_tt
	}
	else = {
		custom_effect_tooltip = toz_give_medals_2_tt
	}
	custom_effect_tooltip = tooltip_white_line
	if = {
		limit = {
			RUS_has_TOZ_attack_medal = yes
			RUS_has_TOZ_defense_medal = no
			RUS_has_TOZ_org_medal = no
			RUS_has_TOZ_breakthrough_medal = no
		}
		custom_effect_tooltip = RUS_TOZ_Medal_a_tt
	}
	else_if = {
		limit = {
			RUS_has_TOZ_attack_medal = yes
			RUS_has_TOZ_defense_medal = no
			RUS_has_TOZ_org_medal = yes
			RUS_has_TOZ_breakthrough_medal = no
		}
		custom_effect_tooltip = RUS_TOZ_Medal_ac_tt
	}
	else_if = {
		limit = {
			RUS_has_TOZ_attack_medal = yes
			RUS_has_TOZ_defense_medal = yes
			RUS_has_TOZ_org_medal = yes
			RUS_has_TOZ_breakthrough_medal = no
		}
		custom_effect_tooltip = RUS_TOZ_Medal_abc_tt
	}
	else_if = {
		limit = {
			RUS_has_TOZ_attack_medal = yes
			RUS_has_TOZ_defense_medal = yes
			RUS_has_TOZ_org_medal = yes
			RUS_has_TOZ_breakthrough_medal = yes
		}
		custom_effect_tooltip = RUS_TOZ_Medal_abcd_tt
	}
	else_if = {
		limit = {
			RUS_has_TOZ_attack_medal = yes
			RUS_has_TOZ_defense_medal = yes
			RUS_has_TOZ_org_medal = no
			RUS_has_TOZ_breakthrough_medal = no
		}
		custom_effect_tooltip = RUS_TOZ_Medal_ab_tt
	}
	else_if = {
		limit = {
			RUS_has_TOZ_attack_medal = no
			RUS_has_TOZ_defense_medal = yes
			RUS_has_TOZ_org_medal = no
			RUS_has_TOZ_breakthrough_medal = no
		}
		custom_effect_tooltip = RUS_TOZ_Medal_b_tt
	}
	else_if = {
		limit = {
			RUS_has_TOZ_attack_medal = no
			RUS_has_TOZ_defense_medal = yes
			RUS_has_TOZ_org_medal = no
			RUS_has_TOZ_breakthrough_medal = yes
		}
		custom_effect_tooltip = RUS_TOZ_Medal_bd_tt
	}
	else_if = {
		limit = {
			RUS_has_TOZ_attack_medal = yes
			RUS_has_TOZ_defense_medal = yes
			RUS_has_TOZ_org_medal = no
			RUS_has_TOZ_breakthrough_medal = yes
		}
		custom_effect_tooltip = RUS_TOZ_Medal_abd_tt
	}
	custom_effect_tooltip = tooltip_white_line
	custom_effect_tooltip = RUS_TOZ_Org_reset_tt
	set_temp_variable = { TOZ_Divisions_Save = TOZ_Divisions }
	while_loop_effect = {
		limit = { check_variable = { TOZ_Divisions > 0 } }
		add_to_variable = { RUS_TOZ_total_medals = 1 }
		if = {
			limit = {
				RUS_has_TOZ_attack_medal = yes
				RUS_has_TOZ_defense_medal = no
				RUS_has_TOZ_org_medal = no
				RUS_has_TOZ_breakthrough_medal = no
			}
			random_country_division = {
				limit = { unit_organization > 0.02 }
				add_history_entry = {
					key = RUS_TOZ_Medal_Award
					subject = "RUS_TOZ_Medal_Award"
					allow = yes
				}
				add_unit_medal_to_latest_entry = {
					unit_medals = RUS_TOZ_Medal_a
				}
				set_unit_organization = 0.01
			}
		}
		else_if = {
			limit = {
				RUS_has_TOZ_attack_medal = yes
				RUS_has_TOZ_defense_medal = no
				RUS_has_TOZ_org_medal = yes
				RUS_has_TOZ_breakthrough_medal = no
			}
			random_country_division = {
				limit = { unit_organization > 0.02 }
				add_history_entry = {
					key = RUS_TOZ_Medal_Award
					subject = "RUS_TOZ_Medal_Award"
					allow = yes
				}
				add_unit_medal_to_latest_entry = {
					unit_medals = RUS_TOZ_Medal_ac
				}
				set_unit_organization = 0.01
			}
		}
		else_if = {
			limit = {
				RUS_has_TOZ_attack_medal = yes
				RUS_has_TOZ_defense_medal = yes
				RUS_has_TOZ_org_medal = yes
				RUS_has_TOZ_breakthrough_medal = no
			}
			random_country_division = {
				limit = { unit_organization > 0.02 }
				add_history_entry = {
					key = RUS_TOZ_Medal_Award
					subject = "RUS_TOZ_Medal_Award"
					allow = yes
				}
				add_unit_medal_to_latest_entry = {
					unit_medals = RUS_TOZ_Medal_abc
				}
				set_unit_organization = 0.01
			}
		}
		else_if = {
			limit = {
				RUS_has_TOZ_attack_medal = yes
				RUS_has_TOZ_defense_medal = yes
				RUS_has_TOZ_org_medal = yes
				RUS_has_TOZ_breakthrough_medal = yes
			}
			random_country_division = {
				limit = { unit_organization > 0.02 }
				add_history_entry = {
					key = RUS_TOZ_Medal_Award
					subject = "RUS_TOZ_Medal_Award"
					allow = yes
				}
				add_unit_medal_to_latest_entry = {
					unit_medals = RUS_TOZ_Medal_abcd
				}
				set_unit_organization = 0.01
			}
		}
		else_if = {
			limit = {
				RUS_has_TOZ_attack_medal = yes
				RUS_has_TOZ_defense_medal = yes
				RUS_has_TOZ_org_medal = no
				RUS_has_TOZ_breakthrough_medal = no
			}
			random_country_division = {
				limit = { unit_organization > 0.02 }
				add_history_entry = {
					key = RUS_TOZ_Medal_Award
					subject = "RUS_TOZ_Medal_Award"
					allow = yes
				}
				add_unit_medal_to_latest_entry = {
					unit_medals = RUS_TOZ_Medal_ab
				}
				set_unit_organization = 0.01
			}
		}
		else_if = {
			limit = {
				RUS_has_TOZ_attack_medal = no
				RUS_has_TOZ_defense_medal = yes
				RUS_has_TOZ_org_medal = no
				RUS_has_TOZ_breakthrough_medal = no
			}
			random_country_division = {
				limit = { unit_organization > 0.02 }
				add_history_entry = {
					key = RUS_TOZ_Medal_Award
					subject = "RUS_TOZ_Medal_Award"
					allow = yes
				}
				add_unit_medal_to_latest_entry = {
					unit_medals = RUS_TOZ_Medal_b
				}
				set_unit_organization = 0.01
			}
		}
		else_if = {
			limit = {
				RUS_has_TOZ_attack_medal = no
				RUS_has_TOZ_defense_medal = yes
				RUS_has_TOZ_org_medal = no
				RUS_has_TOZ_breakthrough_medal = yes
			}
			random_country_division = {
				limit = { unit_organization > 0.02 }
				add_history_entry = {
					key = RUS_TOZ_Medal_Award
					subject = "RUS_TOZ_Medal_Award"
					allow = yes
				}
				add_unit_medal_to_latest_entry = {
					unit_medals = RUS_TOZ_Medal_bd
				}
				set_unit_organization = 0.01
			}
		}
		else_if = {
			limit = {
				RUS_has_TOZ_attack_medal = yes
				RUS_has_TOZ_defense_medal = yes
				RUS_has_TOZ_org_medal = no
				RUS_has_TOZ_breakthrough_medal = yes
			}
			random_country_division = {
				limit = { unit_organization > 0.02 }
				add_history_entry = {
					key = RUS_TOZ_Medal_Award
					subject = "RUS_TOZ_Medal_Award"
					allow = yes
				}
				add_unit_medal_to_latest_entry = {
					unit_medals = RUS_TOZ_Medal_abd
				}
				set_unit_organization = 0.01
			}
		}
		subtract_from_variable = {
			var = TOZ_Divisions
			value = 1
		}
	}
	set_variable = { TOZ_Divisions = TOZ_Divisions_Save }
}

RUS_OSOAVIA_Factories = {
	ROOT = {
		set_variable_to_random = {
			var = RUS_damage
			min = 0.8
			max = 1.0
			integer = no
		}
	}
	if = {
		limit = {
			ROOT = {
				mio:RUS_osoavia_organisation = {
					is_mio_trait_completed = osoavia_upgrade_1_3
				}
			}
		}
		ROOT = {
			subtract_from_variable = {
				var = RUS_damage
				value = 0.2
			}
		}
	}
	if = {
		limit = {
			ROOT = {
				mio:RUS_osoavia_organisation = {
					has_mio_policy_active = RUS_mio_policy_hire_state_construction_companies
				}
			}
		}
		ROOT = {
			subtract_from_variable = {
				var = RUS_damage
				value = 0.2
			}
		}
	}
	random_list = {
		var:RUS_OSOAVIA_Civ_Chance = {
			ROOT = {
				set_variable = { RUS_OSOAVIA_building = 1 }
				mio:RUS_osoavia_organisation = {
					add_to_variable = { total_campaign_civs = 1 }
					set_temp_variable = { progress_sub_total = 1 }
					subtract_from_temp_variable = { progress_sub_total = ROOT.RUS_damage }
					multiply_temp_variable = { progress_sub_total = 100 }
					add_to_variable = { total_campaign_factory_progress = progress_sub_total }
				}
			}
		}
		var:RUS_OSOAVIA_Mil_Chance = {
			ROOT = {
				set_variable = { RUS_OSOAVIA_building = 2 }
				mio:RUS_osoavia_organisation = {
					add_to_variable = { total_campaign_mils = 1 }
					set_temp_variable = { progress_sub_total = 1 }
					subtract_from_temp_variable = { progress_sub_total = ROOT.RUS_damage }
					multiply_temp_variable = { progress_sub_total = 100 }
					add_to_variable = { total_campaign_factory_progress = progress_sub_total }
				}
			}
		}
		var:RUS_OSOAVIA_Dockyard_Chance = {
			ROOT = {
				set_variable = { RUS_OSOAVIA_building = 3 }
				mio:RUS_osoavia_organisation = {
					add_to_variable = { total_campaign_dockyards = 1 }
					set_temp_variable = { progress_sub_total = 1 }
					subtract_from_temp_variable = { progress_sub_total = ROOT.RUS_damage }
					multiply_temp_variable = { progress_sub_total = 100 }
					add_to_variable = { total_campaign_factory_progress = progress_sub_total }
				}
			}
		}
	}
	mio:RUS_osoavia_organisation = {
		add_to_variable = { total_campaign_factories = 1 }
		set_variable = { average_campaign_factory_progress = total_campaign_factory_progress }
		divide_variable = { average_campaign_factory_progress = total_campaign_factories }
	}
	meta_effect = {
		text = {
			ROOT = {
				if = {
					limit = { check_variable = { RUS_OSOAVIA_building = 1 } }
					random_owned_controlled_state = {
						limit = {
							state_population > 1
							NOT = { has_state_flag = RUS_OSOAVIA_Recent_Building }
						}
						add_building_construction = {
							type = industrial_complex
							level = 1
							instant_build = yes
						}
						damage_building = {
							type = industrial_complex
							damage = [RUS_DAMAGE]
						}
						set_state_flag = {
							flag = RUS_OSOAVIA_Recent_Building
							days = 160
							value = 1
						}
					}
				}
				else_if = {
					limit = { check_variable = { RUS_OSOAVIA_building = 2 } }
					random_owned_controlled_state = {
						limit = {
							state_population > 1
							NOT = { has_state_flag = RUS_OSOAVIA_Recent_Building }
						}
						add_building_construction = {
							type = arms_factory
							level = 1
							instant_build = yes
						}
						damage_building = {
							type = arms_factory
							damage = [RUS_DAMAGE]
						}
						set_state_flag = {
							flag = RUS_OSOAVIA_Recent_Building
							days = 160
							value = 1
						}
					}
				}
				else_if = {
					limit = { check_variable = { RUS_OSOAVIA_building = 3 } }
					random_owned_controlled_state = {
						limit = {
							state_population > 1
							is_coastal = yes
							NOT = { has_state_flag = RUS_OSOAVIA_Recent_Building }
						}
						add_building_construction = {
							type = dockyard
							level = 1
							instant_build = yes
						}
						damage_building = {
							type = dockyard
							damage = [RUS_DAMAGE]
						}
						set_state_flag = {
							flag = RUS_OSOAVIA_Recent_Building
							days = 160
							value = 1
						}
					}
				}
			}
		}
		RUS_DAMAGE = "[?RUS_damage|.2]"
	}
}

RUS_private_assistance = {
	set_variable_to_random = {
		var = RUS_MIO_Random_Funds
		min = 100
		max = 300
		integer = yes
	}
	meta_effect = {
		text = {
			random_military_industrial_organization = {
				limit = { is_mio_assigned_to_task = yes }
				add_mio_funds = [FUNDS]
			}
		}
		FUNDS = "[?RUS_MIO_Random_Funds]"
	}
}

RUS_amo_effect_1 = {
	set_variable_to_random = {
		var = RUS_MIO_AMO_CIC
		min = 100
		max = 300
		integer = yes
	}
	add_cic = RUS_MIO_AMO_CIC
}

RUS_amo_effect_2 = {
	set_variable_to_random = {
		var = RUS_MIO_AMO_CIC
		min = 100
		max = 300
		integer = yes
	}
	meta_effect = {
		text = {
			add_cic = [FUNDS]
			add_political_power = [FUNDS]
		}
		FUNDS = "[?RUS_MIO_AMO_CIC]"
	}
}

RUS_bz_add_political_interference = {
	meta_effect = {
		text = {
			show_ideas_tooltip = RUS_bz_political_interference_[IDEOLOGY_TOKEN]
			hidden_effect = { add_ideas = RUS_bz_political_interference_[IDEOLOGY_TOKEN] }
		}
		IDEOLOGY_TOKEN = "[?var:current_party_ideology_group.GetTokenKey]"
	}
}

RUS_unlock_osoavia_policies = {
	custom_effect_tooltip = tooltip_white_line
	unlock_mio_policy_tooltip = { policy = RUS_mio_policy_hire_state_construction_companies show_modifiers = no }
	unlock_mio_policy_tooltip = { policy = RUS_mio_policy_buy_out_land_holdings show_modifiers = no }
}

RUS_unlock_obukhov_policies = {
	custom_effect_tooltip = tooltip_white_line
	unlock_mio_policy_tooltip = { policy = RUS_mio_policy_political_interference_obukhov show_modifiers = no }
	unlock_mio_policy_tooltip = { policy = RUS_mio_policy_private_assistance_obukhov show_modifiers = no }
}

RUS_show_obukhov_political_interference = {
	show_ideas_tooltip = RUS_obukhov_political_interference
}

RUS_show_gamayun_political_interference = {
	show_ideas_tooltip = RUS_gamayun_political_interference
}

RUS_add_laz_upgrade_4_1 = {
	FROM = {
		add_doctrine_cost_reduction = {
			name = laz_upgrade_4_1
			cost_reduction = 0.95
			uses = 1
			category = land_doctrine
		}
	}
}

RUS_Balance_Report = {
	if = {
		limit = { amount_taken_ideas = { amount < 1 slots = { political_advisor } } }
		set_variable = { RUS_political_advisor_number = 0 }
	}
	else_if = {
		limit = { amount_taken_ideas = { amount > 0 slots = { political_advisor } } amount_taken_ideas = { amount < 2 slots = { political_advisor } } }
		set_variable = { RUS_political_advisor_number = 1 }
	}
	else_if = {
		limit = { amount_taken_ideas = { amount > 1 slots = { political_advisor } } amount_taken_ideas = { amount < 3 slots = { political_advisor } } }
		set_variable = { RUS_political_advisor_number = 2 }
	}
	else_if = {
		limit = { amount_taken_ideas = { amount > 2 slots = { political_advisor } } }
		set_variable = { RUS_political_advisor_number = 3 }
	}
	if = {
		limit = { amount_taken_ideas = { amount < 1 slots = { high_command } } }
		set_variable = { RUS_military_advisor_number = 0 }
	}
	else_if = {
		limit = { amount_taken_ideas = { amount > 0 slots = { high_command } } amount_taken_ideas = { amount < 2 slots = { high_command } } }
		set_variable = { RUS_military_advisor_number = 1 }
	}
	else_if = {
		limit = { amount_taken_ideas = { amount > 1 slots = { high_command } } amount_taken_ideas = { amount < 3 slots = { high_command } } }
		set_variable = { RUS_military_advisor_number = 2 }
	}
	else_if = {
		limit = { amount_taken_ideas = { amount > 2 slots = { high_command } } }
		set_variable = { RUS_military_advisor_number = 3 }
	}
	if = {
		limit = { amount_taken_ideas = { amount < 1 slots = { industrial_concern } } }
		set_variable = { RUS_industrial_concern_number = 0 }
	}
	else_if = {
		limit = { amount_taken_ideas = { amount > 0 slots = { industrial_concern } } }
		set_variable = { RUS_industrial_concern_number = 1 }
	}
	if = {
		limit = { amount_taken_ideas = { amount < 1 slots = { theorist } } }
		set_variable = { RUS_theorist_number = 0 }
	}
	else_if = {
		limit = { amount_taken_ideas = { amount > 0 slots = { theorist } } }
		set_variable = { RUS_theorist_number = 1 }
	}
	if = {
		limit = { amount_taken_ideas = { amount < 1 slots = { air_chief } } }
		set_variable = { RUS_air_chief_number = 0 }
	}
	else_if = {
		limit = { amount_taken_ideas = { amount > 0 slots = { air_chief } } }
		set_variable = { RUS_air_chief_number = 1 }
	}
	if = {
		limit = { has_idea = civilian_economy }
		set_variable = { RUS_economy_law_number = 1 }
	}
	if = {
		limit = { has_idea = low_economic_mobilisation }
		set_variable = { RUS_economy_law_number = 2 }
	}
	if = {
		limit = { has_idea = partial_economic_mobilisation }
		set_variable = { RUS_economy_law_number = 3 }
	}
	if = {
		limit = { has_idea = war_economy }
		set_variable = { RUS_economy_law_number = 4 }
	}
	if = {
		limit = { has_idea = tot_economic_mobilisation }
		set_variable = { RUS_economy_law_number = 5 }
	}
	if = {
		limit = { has_idea = volunteer_only }
		set_variable = { RUS_conscription_number = 1 }
	}
	if = {
		limit = { has_idea = limited_conscription }
		set_variable = { RUS_conscription_number = 2 }
	}
	if = {
		limit = { has_idea = extensive_conscription }
		set_variable = { RUS_conscription_number = 3 }
	}
	if = {
		limit = { has_idea = service_by_requirement }
		set_variable = { RUS_conscription_number = 4 }
	}
	if = {
		limit = { RUS = { has_war = yes } }
		set_variable = { RUS_war_number = 1 }
	}
	else_if = {
		limit = { RUS = { has_war = no } }
		set_variable = { RUS_war_number = 0 }
	}
	if = {
		limit = { has_country_flag = RUS_savinkov_ai }
		log = "Main Path: Dictatorship (Savinkov)"
	}
	if = {
		limit = { has_country_flag = RUS_republic_ai }
		log = "Main Path: Republic (DemRus)"
	}
	if = {
		limit = { has_country_flag = RUS_empire_ai }
		log = "Main Path: Monarchy (MonRus)"
	}
	if = {
		limit = { has_country_flag = RUS_socialist_ai }
		log = "Main Path: Socialist Republic (SocRus)"
	}
	if = {
		limit = { has_country_flag = RUS_old_svobodnik_ai }
		log = "Subpath: Old Svobodniks"
	}
	if = {
		limit = { has_country_flag = RUS_solidarist_ai }
		log = "Subpath: Solidarists"
	}
	if = {
		limit = { has_country_flag = RUS_ideocrat_ai }
		log = "Subpath: Ideocrats"
	}
	if = {
		limit = { has_country_flag = RUS_rdp_ai }
		log = "Subpath: RDP (SocDem/Syndie)"
	}
	if = {
		limit = { has_country_flag = RUS_sr_ai }
		log = "Subpath: Right SRs (SocLib)"
	}
	if = {
		limit = { has_country_flag = RUS_kadet_ai }
		log = "Subpath: Kadets (MarLib)"
	}
	if = {
		limit = { has_country_flag = RUS_vpp_ai }
		log = "Subpath: VPP (SocCon/AuthDem/PatAut)"
	}
	if = {
		limit = { has_country_flag = RUS_zdobnov_ai }
		log = "Subpath: Zdobnov (RadSoc/PSR-Left)"
	}
	if = {
		limit = { has_country_flag = RUS_kamkov_ai }
		log = "Subpath: Kamkov (RadSoc/PSR-Left)"
	}
	if = {
		limit = { has_country_flag = RUS_ustinov_ai }
		log = "Subpath: Ustinov (Totalist/PSR-Left)"
	}
	if = {
		limit = { has_country_flag = RUS_levitsky_ai }
		log = "Subpath: Levitsky (Syndie/VST-Centre)"
	}
	if = {
		limit = {
			has_country_flag = RUS_sulimov_ai
			has_country_flag = RUS_socialist_ai
		}
		log = "Subpath: Sulimov (Syndie/VST-Centre)"
	}
	if = {
		limit = { has_country_flag = RUS_abramovich_ai }
		log = "Subpath: Abramovich (Syndie/VST-Right)"
	}
	if = {
		limit = { has_country_flag = RUS_kamenev_ai }
		log = "Subpath: Kamenev (Syndie/VST-Left)"
	}
	if = {
		limit = { has_country_flag = RUS_zinovyev_ai }
		log = "Subpath: Zinovyev (Totalist/VST-Left)"
	}
	if = {
		limit = { has_country_flag = RUS_titov_ai }
		log = "Leader: Titov (SocDem/RDP)"
	}
	if = {
		limit = {
			has_country_flag = RUS_sulimov_ai
			has_country_flag = RUS_republic_ai
		}
		log = "Subpath: Sulimov (Syndie/RDP)"
	}
	if = {
		limit = { has_country_flag = RUS_rikhter_ai }
		log = "Leader: Rikhter (SocLib/PSR-Right)"
	}
	if = {
		limit = { has_country_flag = RUS_sorokin_ai }
		log = "Leader: Sorokin (SocLib/PSR-Right)"
	}
	if = {
		limit = { has_country_flag = RUS_fondaminsky_ai }
		log = "Leader: Fondaminsky (SocLib/PSR-Right)"
	}
	if = {
		limit = { has_country_flag = RUS_maklakov_ai }
		log = "Leader: Maklakov (MarLib/KDS)"
	}
	if = {
		limit = { has_country_flag = RUS_kartashyov_ai }
		log = "Leader: Kartashyov (MarLib/KDS)"
	}
	if = {
		limit = { has_country_flag = RUS_dolgorukov_ai }
		log = "Leader: Dolgorukov (MarLib/KDS)"
	}
	if = {
		limit = {
			has_country_flag = RUS_solonevich_ai
			has_country_flag = RUS_republic_ai
		}
		log = "Leader: Solonevich (AuthDem/VPP)"
	}
	if = {
		limit = {
			RUS_ivan_solonevich = { is_second_in_command = yes }
			has_country_flag = RUS_empire_ai
		}
		log = "Leader: Solonevich (PatAut/VPP)"
	}
	if = {
		limit = {
			RUS_georgy_vernadsky = { is_second_in_command = yes }
			has_country_flag = RUS_empire_ai
		}
		log = "Leader: Vernadsky (SocCon/VPP)"
	}
	if = {
		limit = {
			RUS_aleksandr_golitsyn = { is_second_in_command = yes }
			has_country_flag = RUS_empire_ai
		}
		log = "Leader: Golitsyn (SocCon/VPP)"
	}
	if = {
		limit = { has_country_flag = RUS_dmitry_ai }
		log = "Leader: Romanov (SocCon/VPP)"
	}
	log = "Russian divisions total: [?RUS.num_divisions], Russian factory total: [?RUS.num_of_factories], Russian stability: [?RUS.stability], Russian war support: [?RUS.has_war_support]"
	log = "Number of Russian Political Advisors hired: [?RUS_political_advisor_number], Number of Russian Military Advisors hired: [?RUS_military_advisor_number]"
	log = "Number of Russian Theorists hired: [?RUS_theorist_number], Number of Russian Industrial Concern hired: [?RUS_industrial_concern_number]"
	log = "Number of Russian Air Chiefs hired: [?RUS_air_chief_number], Russian Economy Law: [?RUS_economy_law_number]"
	log = "Russian Conscription Law: [?RUS_conscription_number], Is Russia at war?: [?RUS_war_number]"
}

RUS_setup_custom_russian_MIOs = {
	#Setup the R&D MIOs
	every_military_industrial_organization = {
		limit = {
			OR = {
				is_military_industrial_organization = RUS_chtz_organisation
				is_military_industrial_organization = RUS_tsagi_organisation
				is_military_industrial_organization = RUS_as_organisation
				is_military_industrial_organization = RUS_vpoz_organisation
				is_military_industrial_organization = RUS_bmz_organisation
			}
		}
		set_variable = { max_research_speed = 0.5 }
		set_variable = { weekly_research_speed_gain = 0.01 }
		set_variable = { weekly_funds_requirement = 9 }
		set_variable = { max_research_speed_loc = 50 }
		set_variable = { weekly_research_speed_gain_loc = 1 }
		set_variable = { weekly_funds_requirement_loc = weekly_funds_requirement }
		divide_variable = { weekly_funds_requirement_loc = 7 }
		set_variable = { total_campaign_research_speed = 0 }
	}
	#Setup the XP MIOs
	every_military_industrial_organization = {
		limit = {
			OR = {
				is_military_industrial_organization = RUS_obukhov_organisation
				is_military_industrial_organization = RUS_gamayun_organisation
				is_military_industrial_organization = RUS_bz_organisation
			}
		}
		set_variable = { weekly_funds_requirement = 9 }
		set_variable = { xp_gain_loc = 0.2 }
		set_variable = { weekly_funds_requirement_loc = weekly_funds_requirement }
		divide_variable = { weekly_funds_requirement_loc = 7 }
		set_variable = { total_campaign_xp = 0 }
	}
	#Setup AMO
	mio:RUS_amo_organisation = {
		set_variable = { CIC_bonus = 500 }
		set_variable = { total_campaign_CIC = 0 }
	}
	mio:RUS_amo_organisation_non_nsb = {
		set_variable = { CIC_bonus = 500 }
		set_variable = { total_campaign_CIC = 0 }
	}
	#Setup OSOAVIA
	mio:RUS_osoavia_organisation = {
		set_variable = { Civ_chance_loc = 33 }
		set_variable = { Mil_chance_loc = 33 }
		set_variable = { Dockyard_chance_loc = 33 }
		set_variable = { Min_Progress_loc = 0 }
		set_variable = { Max_Progress_loc = 20 }
		set_variable = { Min_Days_loc = 160 }
		set_variable = { Max_Days_loc = 200 }
		set_variable = { total_campaign_factories = 0 }
		set_variable = { total_campaign_civs = 0 }
		set_variable = { total_campaign_mils = 0 }
		set_variable = { total_campaign_dockyards = 0 }
		set_variable = { total_campaign_factory_progress = 0 }
		set_variable = { average_campaign_factory_progress = 0 }
	}
	#Setup AV
	mio:RUS_av_organisation = {
		set_variable = { Funds_Bonus = 1.00 }
		set_variable = { Weekly_funds_decay = 0.03 }
		set_variable = { Number_of_funds_decay_granted = 1 }
		set_variable = { Funds_Bonus_loc = 100 }
		set_variable = { Weekly_funds_decay_loc = 3 }
		set_variable = { total_campaign_funds_bonus = 0 }
	}
	#Setup TsTZ
	mio:RUS_tstz_organisation = {
		set_variable = { tstz_eff_cap_counter = 9 }
		set_variable = { tstz_eff_gro_counter = 9 }
		set_variable = { tstz_resources_counter = 9 }
		set_variable = { tstz_conversion_counter = 9 }
	}
}

RUS_unlock_chtz_trait = {
	FROM = {
		hidden_effect = {
			if = {
				limit = {
					mio:RUS_chtz_organisation = { check_variable = { research_bonus < 0.1 } }
				}
				mio:RUS_chtz_organisation = { complete_mio_trait = chtz_upgrade_4_1_tankograd_0 }
			}
			else_if = {
				limit = {
					mio:RUS_chtz_organisation = { check_variable = { research_bonus > 0.09 } }
					mio:RUS_chtz_organisation = { check_variable = { research_bonus < 0.2 } }
				}
				mio:RUS_chtz_organisation = { complete_mio_trait = chtz_upgrade_4_1_tankograd_1 }
			}
			else_if = {
				limit = {
					mio:RUS_chtz_organisation = { check_variable = { research_bonus > 0.19 } }
					mio:RUS_chtz_organisation = { check_variable = { research_bonus < 0.3 } }
				}
				mio:RUS_chtz_organisation = { complete_mio_trait = chtz_upgrade_4_1_tankograd_2 }
			}
			else_if = {
				limit = {
					mio:RUS_chtz_organisation = { check_variable = { research_bonus > 0.29 } }
					mio:RUS_chtz_organisation = { check_variable = { research_bonus < 0.4 } }
				}
				mio:RUS_chtz_organisation = { complete_mio_trait = chtz_upgrade_4_1_tankograd_3 }
			}
			else_if = {
				limit = {
					mio:RUS_chtz_organisation = { check_variable = { research_bonus > 0.39 } }
					mio:RUS_chtz_organisation = { check_variable = { research_bonus < 0.5 } }
				}
				mio:RUS_chtz_organisation = { complete_mio_trait = chtz_upgrade_4_1_tankograd_4 }
			}
			else_if = {
				limit = {
					mio:RUS_chtz_organisation = { check_variable = { research_bonus > 0.49 } }
					mio:RUS_chtz_organisation = { check_variable = { research_bonus < 0.6 } }
				}
				mio:RUS_chtz_organisation = { complete_mio_trait = chtz_upgrade_4_1_tankograd_5 }
			}
			else_if = {
				limit = {
					mio:RUS_chtz_organisation = { check_variable = { research_bonus > 0.59 } }
					mio:RUS_chtz_organisation = { check_variable = { research_bonus < 0.7 } }
				}
				mio:RUS_chtz_organisation = { complete_mio_trait = chtz_upgrade_4_1_tankograd_6 }
			}
			else_if = {
				limit = {
					mio:RUS_chtz_organisation = { check_variable = { research_bonus > 0.69 } }
					mio:RUS_chtz_organisation = { check_variable = { research_bonus < 0.8 } }
				}
				mio:RUS_chtz_organisation = { complete_mio_trait = chtz_upgrade_4_1_tankograd_7 }
			}
			else_if = {
				limit = {
					mio:RUS_chtz_organisation = { check_variable = { research_bonus > 0.79 } }
					mio:RUS_chtz_organisation = { check_variable = { research_bonus < 0.9 } }
				}
				mio:RUS_chtz_organisation = { complete_mio_trait = chtz_upgrade_4_1_tankograd_8 }
			}
			else_if = {
				limit = {
					mio:RUS_chtz_organisation = { check_variable = { research_bonus > 0.89 } }
					mio:RUS_chtz_organisation = { check_variable = { research_bonus < 1.0 } }
				}
				mio:RUS_chtz_organisation = { complete_mio_trait = chtz_upgrade_4_1_tankograd_9 }
			}
			else_if = {
				limit = {
					mio:RUS_chtz_organisation = { check_variable = { research_bonus > 0.99 } }
					mio:RUS_chtz_organisation = { check_variable = { research_bonus < 1.1 } }
				}
				mio:RUS_chtz_organisation = { complete_mio_trait = chtz_upgrade_4_1_tankograd_10 }
			}
			else_if = {
				limit = {
					mio:RUS_chtz_organisation = { check_variable = { research_bonus > 1.09 } }
					mio:RUS_chtz_organisation = { check_variable = { research_bonus < 1.2 } }
				}
				mio:RUS_chtz_organisation = { complete_mio_trait = chtz_upgrade_4_1_tankograd_11 }
			}
			else_if = {
				limit = {
					mio:RUS_chtz_organisation = { check_variable = { research_bonus > 1.19 } }
					mio:RUS_chtz_organisation = { check_variable = { research_bonus < 1.3 } }
				}
				mio:RUS_chtz_organisation = { complete_mio_trait = chtz_upgrade_4_1_tankograd_12 }
			}
		}
	}
}

RUS_unlock_tsagi_trait = {
	FROM = {
		hidden_effect = {
			if = {
				limit = {
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus < 0.1 } }
				}
				mio:RUS_tsagi_organisation = { complete_mio_trait = tsagi_upgrade_4_1_0 }
			}
			else_if = {
				limit = {
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus > 0.09 } }
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus < 0.2 } }
				}
				mio:RUS_tsagi_organisation = { complete_mio_trait = tsagi_upgrade_4_1_1 }
			}
			else_if = {
				limit = {
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus > 0.19 } }
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus < 0.3 } }
				}
				mio:RUS_tsagi_organisation = { complete_mio_trait = tsagi_upgrade_4_1_2 }
			}
			else_if = {
				limit = {
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus > 0.29 } }
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus < 0.4 } }
				}
				mio:RUS_tsagi_organisation = { complete_mio_trait = tsagi_upgrade_4_1_3 }
			}
			else_if = {
				limit = {
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus > 0.39 } }
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus < 0.5 } }
				}
				mio:RUS_tsagi_organisation = { complete_mio_trait = tsagi_upgrade_4_1_4 }
			}
			else_if = {
				limit = {
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus > 0.49 } }
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus < 0.6 } }
				}
				mio:RUS_tsagi_organisation = { complete_mio_trait = tsagi_upgrade_4_1_5 }
			}
			else_if = {
				limit = {
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus > 0.59 } }
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus < 0.7 } }
				}
				mio:RUS_tsagi_organisation = { complete_mio_trait = tsagi_upgrade_4_1_6 }
			}
			else_if = {
				limit = {
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus > 0.69 } }
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus < 0.8 } }
				}
				mio:RUS_tsagi_organisation = { complete_mio_trait = tsagi_upgrade_4_1_7 }
			}
			else_if = {
				limit = {
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus > 0.79 } }
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus < 0.9 } }
				}
				mio:RUS_tsagi_organisation = { complete_mio_trait = tsagi_upgrade_4_1_8 }
			}
			else_if = {
				limit = {
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus > 0.89 } }
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus < 1.0 } }
				}
				mio:RUS_tsagi_organisation = { complete_mio_trait = tsagi_upgrade_4_1_9 }
			}
			else_if = {
				limit = {
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus > 0.99 } }
					mio:RUS_tsagi_organisation = { check_variable = { research_bonus < 1.1 } }
				}
				mio:RUS_tsagi_organisation = { complete_mio_trait = tsagi_upgrade_4_1_10 }
			}
		}
	}
}

RUS_unlock_as_trait = {
	FROM = {
		hidden_effect = {
			if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus < 0.1 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_0 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 0.09 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 0.2 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_1 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 0.19 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 0.3 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_2 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 0.29 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 0.4 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_3 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 0.39 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 0.5 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_4 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 0.49 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 0.6 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_5 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 0.59 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 0.7 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_6 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 0.69 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 0.8 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_7 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 0.79 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 0.9 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_8 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 0.89 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 1.0 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_9 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 0.99 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 1.1 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_10 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 1.09 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 1.2 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_11 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 1.19 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 1.3 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_12 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 1.29 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 1.4 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_13 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 1.39 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 1.5 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_14 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 1.49 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 1.6 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_15 }
			}
			else_if = {
				limit = {
					mio:RUS_as_organisation = { check_variable = { research_bonus > 1.59 } }
					mio:RUS_as_organisation = { check_variable = { research_bonus < 1.7 } }
				}
				mio:RUS_as_organisation = { complete_mio_trait = as_upgrade_4_1_16 }
			}
		}
	}
}
